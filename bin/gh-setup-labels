#!/bin/bash
# Set up GitHub labels for the project

echo "🏷️  Setting up GitHub labels for Backstage Pass..."
echo "================================================"

# Check if gh is installed and authenticated
if ! command -v gh &> /dev/null; then
    echo "❌ GitHub CLI not installed. Run: brew install gh"
    exit 1
fi

if ! gh auth status &> /dev/null; then
    echo "❌ Not authenticated. Run: gh auth login"
    exit 1
fi

echo "Creating AI workflow labels..."

# AI Workflow Labels
gh label create "ai/ready" --description "Ready for AI implementation" --color "00FF00" 2>/dev/null || echo "  ✓ ai/ready exists"
gh label create "ai/working" --description "AI currently working" --color "FFFF00" 2>/dev/null || echo "  ✓ ai/working exists"
gh label create "ai/complete" --description "AI work complete" --color "0000FF" 2>/dev/null || echo "  ✓ ai/complete exists"
gh label create "ai/needs-human" --description "Needs human input" --color "FF00FF" 2>/dev/null || echo "  ✓ ai/needs-human exists"

echo "Creating status labels..."

# Status Labels
gh label create "status/exploring" --description "Research phase" --color "E1E4E8" 2>/dev/null || echo "  ✓ status/exploring exists"
gh label create "status/planning" --description "Being defined" --color "0E8A16" 2>/dev/null || echo "  ✓ status/planning exists"
gh label create "status/ready" --description "Ready for work" --color "2188FF" 2>/dev/null || echo "  ✓ status/ready exists"
gh label create "status/executing" --description "In progress" --color "6F42C1" 2>/dev/null || echo "  ✓ status/executing exists"
gh label create "status/blocked" --description "Blocked" --color "B60205" 2>/dev/null || echo "  ✓ status/blocked exists"
gh label create "status/review" --description "In review" --color "FFA500" 2>/dev/null || echo "  ✓ status/review exists"

echo "Creating priority labels..."

# Priority Labels
gh label create "priority/critical" --description "Blocking issues" --color "FF0000" 2>/dev/null || echo "  ✓ priority/critical exists"
gh label create "priority/high" --description "Important" --color "FFA500" 2>/dev/null || echo "  ✓ priority/high exists"
gh label create "priority/medium" --description "Standard priority" --color "FFFF00" 2>/dev/null || echo "  ✓ priority/medium exists"
gh label create "priority/low" --description "Nice to have" --color "00FF00" 2>/dev/null || echo "  ✓ priority/low exists"

echo "Creating type labels..."

# Type Labels
gh label create "type/feature" --description "New functionality" --color "0052CC" 2>/dev/null || echo "  ✓ type/feature exists"
gh label create "type/bug" --description "Something broken" --color "D73A4A" 2>/dev/null || echo "  ✓ type/bug exists"
gh label create "type/enhancement" --description "Improvement" --color "A2EEEF" 2>/dev/null || echo "  ✓ type/enhancement exists"
gh label create "type/docs" --description "Documentation" --color "0075CA" 2>/dev/null || echo "  ✓ type/docs exists"
gh label create "type/tech-debt" --description "Code quality" --color "7057FF" 2>/dev/null || echo "  ✓ type/tech-debt exists"

echo "Creating component labels..."

# Component Labels
gh label create "component/auth" --description "Authentication" --color "5319E7" 2>/dev/null || echo "  ✓ component/auth exists"
gh label create "component/models" --description "Data models" --color "B60205" 2>/dev/null || echo "  ✓ component/models exists"
gh label create "component/streaming" --description "LiveKit/video" --color "0E8A16" 2>/dev/null || echo "  ✓ component/streaming exists"
gh label create "component/payments" --description "Stripe/billing" --color "F9D0C4" 2>/dev/null || echo "  ✓ component/payments exists"
gh label create "component/ui" --description "Frontend" --color "C5DEF5" 2>/dev/null || echo "  ✓ component/ui exists"
gh label create "component/mobile" --description "Hotwire Native" --color "BFD4F2" 2>/dev/null || echo "  ✓ component/mobile exists"

echo "Creating sprint labels..."

# Sprint Labels
gh label create "sprint/week-1" --description "Week 1 sprint" --color "FBCA04" 2>/dev/null || echo "  ✓ sprint/week-1 exists"
gh label create "sprint/week-2" --description "Week 2 sprint" --color "FBCA04" 2>/dev/null || echo "  ✓ sprint/week-2 exists"
gh label create "sprint/week-3" --description "Week 3 sprint" --color "FBCA04" 2>/dev/null || echo "  ✓ sprint/week-3 exists"
gh label create "sprint/week-4" --description "Week 4 sprint" --color "FBCA04" 2>/dev/null || echo "  ✓ sprint/week-4 exists"

echo ""
echo "✅ Labels setup complete!"
echo ""
echo "📋 Next steps:"
echo "   1. Create your first issues on GitHub"
echo "   2. Label them appropriately"
echo "   3. Run: bin/gh-sync"
echo "   4. Start working: bin/gh-start <issue-number>"