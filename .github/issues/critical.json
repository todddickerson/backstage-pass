[{"assignees":[],"body":"## User Story\nAs a **viewer**, I want to **purchase an Access Pass** so that **I can access exclusive content**.\n\n## Acceptance Criteria\n- [ ] Can click \"Get Access\" on any Access Pass\n- [ ] If not logged in, enter email for passwordless auth\n- [ ] Receive 6-digit code via email\n- [ ] Complete purchase with credit card (Stripe Elements)\n- [ ] Immediately redirected to purchased content\n- [ ] Receive email confirmation\n\n## Technical Requirements\n- Create Billing::Purchase model (namespaced)\n- Create AccessGrant model to track user access to passes\n- Integrate Stripe Elements for payment processing\n- Implement passwordless authentication with OTP\n- Create Public::PurchasesController for checkout flow\n- Create Account::AccessPassesController for managing purchases\n\n## Implementation Steps\n1. Add Pay gem and configure Stripe\n2. Create Purchase and AccessGrant models\n3. Build checkout flow with Stripe Elements\n4. Add passwordless auth with email OTP\n5. Create purchase confirmation emails\n6. Add access verification to experiences\n\n## Dependencies\n- Stripe API keys configured\n- Pay gem for Stripe integration\n- Requires AccessPass model from Story 2\n\n## Priority\nCritical for Phase 1 MVP - monetization requires purchase flow","labels":[{"id":"LA_kwDOPu35oc8AAAACKadxIA","name":"ai/ready","description":"Ready for AI implementation","color":"00FF00"},{"id":"LA_kwDOPu35oc8AAAACKadyEQ","name":"status/ready","description":"Ready for work","color":"2188FF"},{"id":"LA_kwDOPu35oc8AAAACKady0g","name":"priority/critical","description":"Blocking issues","color":"FF0000"},{"id":"LA_kwDOPu35oc8AAAACKadzdA","name":"type/feature","description":"New functionality","color":"0052CC"},{"id":"LA_kwDOPu35oc8AAAACKad0nw","name":"component/payments","description":"Stripe/billing","color":"F9D0C4"},{"id":"LA_kwDOPu35oc8AAAACKad1JA","name":"sprint/week-2","description":"Week 2 sprint","color":"FBCA04"}],"milestone":{"number":2,"title":"Week 2: Streaming","description":"LiveKit integration, stream management, real-time features.","dueOn":"2025-09-29T00:00:00Z"},"number":35,"title":"[STORY 3] Purchase Flow: Stripe Integration & Checkout"},{"assignees":[],"body":"## User Story\nAs a **creator**, I want to **create different tiers of access passes** so that **I can offer various pricing options**.\n\n## Acceptance Criteria\n- [ ] Can create multiple Access Passes per Space\n- [ ] Can set pricing (free, one-time, monthly, yearly)\n- [ ] Can select which Experiences are included in each pass\n- [ ] Can set stock limits and expiration\n- [ ] Can enable waitlist with custom questions\n- [ ] Can preview sales page for each Access Pass\n\n## Technical Requirements\n- Create AccessPass model with complex pricing structure\n- Create Experience model for content/streams\n- Create AccessPassExperience join table (already exists, needs proper associations)\n- Integrate money-rails gem for price fields\n- Add pricing_type enum: [:free, :one_time, :monthly, :yearly]\n- Add stock management fields\n\n## Super Scaffold Commands\n```bash\n# Create Experience model\nrails generate super_scaffold Experience Space,Team title:text_field description:trix_editor experience_type:buttons scheduled_at:date_and_time_field\n\n# Create AccessPass model\nrails generate super_scaffold AccessPass Space,Team title:text_field description:trix_editor pricing_type:buttons price_cents:number_field stock_limit:number_field expires_at:date_and_time_field waitlist_enabled:boolean\n\n# Add associations in models\n```\n\n## Dependencies\n- money-rails gem\n- Requires Space model from Story 1\n\n## Priority\nCritical for Phase 1 MVP - core monetization feature","labels":[{"id":"LA_kwDOPu35oc8AAAACKadxIA","name":"ai/ready","description":"Ready for AI implementation","color":"00FF00"},{"id":"LA_kwDOPu35oc8AAAACKadyEQ","name":"status/ready","description":"Ready for work","color":"2188FF"},{"id":"LA_kwDOPu35oc8AAAACKady0g","name":"priority/critical","description":"Blocking issues","color":"FF0000"},{"id":"LA_kwDOPu35oc8AAAACKadzdA","name":"type/feature","description":"New functionality","color":"0052CC"},{"id":"LA_kwDOPu35oc8AAAACKad0aA","name":"component/models","description":"Data models","color":"B60205"},{"id":"LA_kwDOPu35oc8AAAACKad0nw","name":"component/payments","description":"Stripe/billing","color":"F9D0C4"},{"id":"LA_kwDOPu35oc8AAAACKad1Bw","name":"sprint/week-1","description":"Week 1 sprint","color":"FBCA04"}],"milestone":{"number":1,"title":"Week 1: Foundation","description":"Core models, authentication, routing setup. Bullet Train scaffolding.","dueOn":"2025-09-22T00:00:00Z"},"number":34,"title":"[STORY 2] Access Pass System: Products & Pricing"}]
