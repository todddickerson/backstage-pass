<% if content_for? :title %>
  <%= yield :title %>
<% elsif @title.present? %>
  <title><%= @title %> | <%= t('application.name') %></title>
<% else %>
  <title><%= t('application.name') %></title>
<% end %>

<meta charset="utf-8" />
<meta content="ie=edge" http-equiv="x-ua-compatible" />
<meta content="<%= t('application.keywords') %>" name="keywords" />
<meta content="<%= t('application.description') %>" name="description" />
<meta content="width=device-width, initial-scale=1" name="viewport" />

<meta name="mobile-web-app-capable" content="yes" />

<%= csrf_meta_tags %>

<meta name="turbo-cache-control" content="no-cache">

<% if cloudinary_enabled? %>
<script src="https://upload-widget.cloudinary.com/2.1.15/global/all.js" type="text/javascript"></script>
<% end %>

<meta name="intl_tel_input_utils_path" content="<%= asset_path("intl-tel-input-utils.js") %>">

<%= render 'magic_test/support' if Rails.env.test? %>

<%= capybara_lockstep if defined?(Capybara::Lockstep) %>

<% # put your application-specific additions below to avoid merge conflicts later. %>

<% # Mobile app detection and configuration %>
<% if hotwire_native_app? %>
  <meta name="hotwire-native-version" content="1.0">
  <meta name="hotwire-native-config" content="<%= "/hotwire-native-config/#{platform}.json" %>">
  
  <% # iOS specific %>
  <% if ios_app? %>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <% end %>
  
  <% # Android specific %>
  <% if android_app? %>
    <meta name="theme-color" content="#1a1a1a">
  <% end %>
<% elsif mobile_app? %>
  <% # Mobile web specific %>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
<% end %>
