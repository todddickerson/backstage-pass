<% content_for :page_title, @creator_profile.persisted? ? "Edit Creator Profile" : "Create Creator Profile" %>

<div class="max-w-2xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900 mb-2">
      <%= @creator_profile.persisted? ? "Edit Your Creator Profile" : "Set Up Your Creator Profile" %>
    </h1>
    <p class="text-gray-600">
      Your creator profile is how fans will discover and connect with you. 
      Choose a memorable username for your @username URL.
    </p>
  </div>

  <%= form_with model: [@creator_profile], url: @creator_profile.persisted? ? account_creator_profile_path : account_creator_profile_path, 
                method: @creator_profile.persisted? ? :patch : :post, 
                local: true, class: "space-y-6" do |form| %>
    
    <% if @creator_profile.errors.any? %>
      <div class="bg-red-50 border border-red-200 rounded-lg p-4">
        <h3 class="text-red-800 font-semibold mb-2">Please fix the following errors:</h3>
        <ul class="text-red-700 space-y-1">
          <% @creator_profile.errors.full_messages.each do |message| %>
            <li>â€¢ <%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="grid grid-cols-1 gap-6">
      <!-- Username Field -->
      <div>
        <label for="creators_profile_username" class="block text-sm font-medium text-gray-700 mb-2">
          Username *
        </label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
            <span class="text-gray-500 sm:text-sm">@</span>
          </div>
          <%= form.text_field :username, 
                             class: "block w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",
                             placeholder: "your-username",
                             required: true %>
        </div>
        <p class="mt-1 text-sm text-gray-500">
          This will be your public URL: backstagepass.app/<strong>@your-username</strong>
        </p>
      </div>

      <!-- Display Name Field -->
      <div>
        <label for="creators_profile_display_name" class="block text-sm font-medium text-gray-700 mb-2">
          Display Name *
        </label>
        <%= form.text_field :display_name, 
                           class: "block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",
                           placeholder: "Your Name or Brand",
                           required: true %>
        <p class="mt-1 text-sm text-gray-500">
          This is how your name will appear to your audience.
        </p>
      </div>

      <!-- Bio Field -->
      <div>
        <label for="creators_profile_bio" class="block text-sm font-medium text-gray-700 mb-2">
          Bio
        </label>
        <%= form.rich_text_area :bio, 
                               class: "block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",
                               rows: 4,
                               placeholder: "Tell your audience about yourself, your content, and what they can expect..." %>
        <p class="mt-1 text-sm text-gray-500">
          Share what makes your content special and what fans can expect.
        </p>
      </div>

      <!-- Website URL Field -->
      <div>
        <label for="creators_profile_website_url" class="block text-sm font-medium text-gray-700 mb-2">
          Website
        </label>
        <%= form.url_field :website_url, 
                          class: "block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",
                          placeholder: "https://your-website.com" %>
        <p class="mt-1 text-sm text-gray-500">
          Link to your main website, portfolio, or social media.
        </p>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-between items-center pt-6 border-t border-gray-200">
      <div class="flex space-x-3">
        <%= form.submit @creator_profile.persisted? ? "Update Profile" : "Create Profile", 
                       class: "bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-colors" %>
        
        <%= link_to "Cancel", @creator_profile.persisted? ? account_creator_profile_path : account_dashboard_path, 
                   class: "bg-gray-200 text-gray-800 px-6 py-2 rounded-lg font-semibold hover:bg-gray-300 transition-colors" %>
      </div>
      
      <% if @creator_profile.persisted? && @creator_profile.username.present? %>
        <div class="text-sm text-gray-500">
          Public URL: 
          <%= link_to "@#{@creator_profile.username}", creator_profile_path(@creator_profile.username), 
                     target: "_blank", class: "text-blue-600 hover:text-blue-800 underline" %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>